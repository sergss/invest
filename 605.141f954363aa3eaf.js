"use strict";(self.webpackChunkinvest=self.webpackChunkinvest||[]).push([[605],{3605:(St,Y,c)=>{c.r(Y),c.d(Y,{StocksModule:()=>It});var b=c(6895),I=c(4026),S=c(3786),F=c(7582),r=(()=>{return(e=r||(r={})).Date="date",e.Price="price",e.InvestedTotal="investedTotal",e.StocksTotal="stocksTotal",e.PercentTotalAbsolute="percentTotalAbsolute",e.PercentTotal="percentTotal",e.PortfolioTotal="portfolioTotal",e.TotalInflation="totalInflation",e.TotalMinusInflation="totalMinusInflation",e.InvestmentAmount="investmentAmount",r;var e})(),_=(()=>{return(e=_||(_={})).Custom="custom",e.Top500="top500",e.All="all",_;var e})(),w=c(5264),O=c(6316);function f(e){return Math.round(100*e)/100}var t=c(8274),M=c(1832),p=c(4006),R=c(8532),h=(()=>{return(e=h||(h={})).UntilNow="untilNow",e.SelectDate="selectDate",e.MonthQuantity="monthQuantity",e.YearsQuantity="yearsQuantity",h;var e})();function Q(e){const s=e.indexOf("["),n=e.indexOf("]");return-1!==s&&-1!==n?e.slice(s+1,n):""}var y,G=c(2768),N=c(3606),j=c(7919),x=c(4463),z=c(5830),K=c(1008),H=c(5593),V=c(1458),X=c(7188),W=c(4294),tt=c(8177),et=c(1989);function nt(e,s){1&e&&(t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"p-calendar",20),t.ALo(3,"translate"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("placeholder",t.lcZ(3,3,"form.label.endDate"))("readonlyInput",!0)("showIcon",!0))}function ot(e,s){1&e&&(t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"p-inputNumber",21),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("placeholder","N "+t.lcZ(3,4,"form.label.m"))("min",1)("max",600)("suffix"," "+t.lcZ(4,6,"form.label.m")))}function st(e,s){1&e&&(t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"p-inputNumber",22),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("placeholder","N "+t.lcZ(3,4,"form.label.y"))("min",1)("max",50)("suffix"," "+t.lcZ(4,6,"form.label.y")))}function at(e,s){1&e&&(t.TgZ(0,"div",1)(1,"div",2)(2,"label",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"i",4),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",14),t._UZ(8,"p-inputNumber",24),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,8,"form.label.inflationValue")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(6,10,"tooltip.inflationValue"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("placeholder","0%")("min",0)("max",36)("suffix","%"))}function it(e,s){1&e&&(t.TgZ(0,"div",1)(1,"div",2)(2,"label",25),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"i",4),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",14),t._UZ(8,"p-inputNumber",26),t.ALo(9,"translate"),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,8,"form.label.amountInitial")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(6,10,"tooltip.amountInitial"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("placeholder",t.lcZ(9,12,"form.label.amountInitial"))("min",0)("max",1e6)("minFractionDigits",0))}let U=((y=class{constructor(s,n,o,a){this.translateService=s,this.router=n,this.loaderService=o,this.storage=a,this.formSubmit=new t.vpe,this.FORM_KEY="frm",this.stocksCustom=N.xB.map(l=>({name:l,code:Q(l)})),this.stocksTop500=N.aj.map(l=>({name:l,code:Q(l)})),this.stocksAll=N.vF.map(l=>({name:l,code:Q(l)})),this.filteredStocks=[],this.endDateOptions=this.getEndDateOptions(),this.investmentAmount=100,this.routeTitleKey=R.d.Empty,this.DateEnum=h,this.isYahooLoading$=this.loaderService.isYahooLoading$,this.stocks=this.stocksCustom,this.stockSymbolsListOptions=this.getSymbolListOptions(),this.isStockListAsDropdown=!0,this.initializeSubscriptions(),this.initializeForm()}filterStock(s){const n=[],o=s.query.toLowerCase();for(let a=0;a<this.stocks.length;a++){const l=this.stocks[a];l.name.toLowerCase().includes(o)&&n.push(l)}this.filteredStocks=n}submitForm(){const s=this.patchEndDate();this.saveFormValue(s),this.formSubmit.emit(s)}selectSymbolOptions(s){switch(s.code){case _.Custom:this.isStockListAsDropdown=!0,this.stocks=[...this.stocksCustom];break;case _.Top500:this.isStockListAsDropdown=!0,this.stocks=[...this.stocksTop500];break;case _.All:this.isStockListAsDropdown=!1,this.stocks=[...this.stocksAll]}this.form.controls.stockSymbol.patchValue(null),this.form.controls.stockSymbol.markAsDirty()}initializeSubscriptions(){this.routeTitleKey=(0,G.T)(this.router.routerState.root),this.router.events.pipe((0,w.t)(this)).subscribe(s=>{s instanceof S.m2&&(this.routeTitleKey=(0,G.T)(this.router.routerState.root))}),this.translateService.onLangChange.pipe((0,w.t)(this)).subscribe(()=>{this.endDateOptions=this.getEndDateOptions(),this.stockSymbolsListOptions=this.getSymbolListOptions()})}initializeForm(){const s=this.storage.getItem(this.FORM_KEY),n=s&&atob(s),{startDate:o,endDateType:a,endDate:l,monthQuantity:d,yearsQuantity:u,stockSymbol:g,addInitialAmount:T,investmentAmountInitial:Z,investmentAmount:v,inflationMatter:i,inflationValue:m}=JSON.parse(n)||{},C=o&&new Date(o),A=l&&new Date(l),D=(0,O.oS)((new Date).getTime(),240);v&&(this.investmentAmount=v);const J=a?this.endDateOptions.find($=>$.code===a.code):this.endDateOptions[0];this.form=new p.cw({startDate:new p.NI(C||new Date(D),p.kI.required),endDateType:new p.NI(J,p.kI.required),endDate:new p.NI(A||new Date("01-01-2023"),p.kI.required),monthQuantity:new p.NI(d||12,p.kI.required),yearsQuantity:new p.NI(u||1,p.kI.required),stockSymbol:new p.NI(g||this.stocks[0],[p.kI.required]),addInitialAmount:new p.NI(T||!1),investmentAmountInitial:new p.NI(Z||0),investmentAmount:new p.NI(this.investmentAmount,p.kI.required),inflationMatter:new p.NI(i||!1),inflationValue:new p.NI(m||0)})}getEndDateOptions(){return[{name:this.translateService.instant("form.label.untilNow"),code:h.UntilNow},{name:this.translateService.instant("form.label.selectDate"),code:h.SelectDate},{name:this.translateService.instant("form.label.monthQuantity"),code:h.MonthQuantity},{name:this.translateService.instant("form.label.yearsQuantity"),code:h.YearsQuantity}]}getSymbolListOptions(){return[{name:this.translateService.instant("form.label.stocks.symbolListOptions.custom"),code:_.Custom},{name:this.translateService.instant("form.label.stocks.symbolListOptions.top500"),code:_.Top500},{name:this.translateService.instant("form.label.stocks.symbolListOptions.all"),code:_.All}]}patchEndDate(){if(this.form.value.endDateType.code!==h.SelectDate){const n=this.getEndDate();this.form.patchValue({endDate:n})}return this.form.value}getEndDate(){const s=this.form.value.startDate.getTime();switch(this.form.value.endDateType.code){case h.MonthQuantity:return new Date((0,O.NB)(s,this.form.value.monthQuantity));case h.YearsQuantity:return new Date((0,O.NB)(s,12*this.form.value.yearsQuantity));default:return new Date}}saveFormValue(s){const n={...s,endDateType:{...s.endDateType,name:""}};this.storage.setItem(this.FORM_KEY,btoa(JSON.stringify(n)))}}).\u0275fac=function(s){return new(s||y)(t.Y36(x.sK),t.Y36(S.F0),t.Y36(M.D1),t.Y36(j.H3))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-general-form"]],outputs:{formSubmit:"formSubmit"},decls:72,vars:94,consts:[[1,"p-fluid","general-form",3,"formGroup","ngSubmit"],[1,"general-form__field"],[1,"general-form__label"],["for","startDate"],[1,"pi","pi-question","info-icon",3,"popperLoose","popperLooseTrigger","popperLoosePlacement"],["formControlName","startDate","id","startDate","view","month","dateFormat","mm/yy",1,"general-form__input",3,"placeholder","readonlyInput","showIcon"],["for","endDateType"],["formControlName","endDateType","id","endDateType","optionLabel","name",1,"general-form__input",3,"options"],["class","general-form__field",4,"ngIf"],["for","stockSymbolsList"],["id","stockSymbolsList","optionLabel","name",1,"general-form__input",3,"options","onChange"],["for","stockSymbol"],["formControlName","stockSymbol","id","stockSymbol","field","name",1,"general-form__input",3,"suggestions","dropdown","forceSelection","placeholder","completeMethod"],["for","investmentAmount"],[1,"general-form__input"],["formControlName","investmentAmount","id","investmentAmount","inputId","stacked","mode","currency","currency","USD",1,"w-full","input-with-slider",3,"ngModel","placeholder","min","max","ngModelChange"],["formControlName","investmentAmount",1,"w-full","input-with-slider",3,"ngModel","min","max","step","ngModelChange"],["formControlName","inflationMatter",3,"binary"],["formControlName","addInitialAmount",3,"binary"],["type","submit","icon","pi pi-check",1,"p-button-sm","general-form__submit",3,"label","disabled","loading"],["formControlName","endDate","view","month","dateFormat","mm/yy",1,"general-form__input",3,"placeholder","readonlyInput","showIcon"],["formControlName","monthQuantity",1,"general-form__input",3,"placeholder","min","max","suffix"],["formControlName","yearsQuantity",1,"general-form__input",3,"placeholder","min","max","suffix"],["for","inflationValue"],["formControlName","inflationValue","id","inflationValue",1,"general-form__input",3,"placeholder","min","max","suffix"],["for","investmentAmountInitial"],["formControlName","investmentAmountInitial","id","investmentAmountInitial","inputId","stacked","mode","currency","currency","USD",1,"general-form__input",3,"placeholder","min","max","minFractionDigits"]],template:function(s,n){1&s&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.submitForm()}),t.TgZ(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"i",4),t.ALo(7,"translate"),t.qZA(),t._UZ(8,"p-calendar",5),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",1)(11,"div",2)(12,"label",6),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"i",4),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"p-dropdown",7),t.qZA(),t.YNc(18,nt,4,5,"div",8),t.YNc(19,ot,5,8,"div",8),t.YNc(20,st,5,8,"div",8),t.TgZ(21,"div",1)(22,"div",2)(23,"label",9),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"i",4),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"p-dropdown",10),t.NdJ("onChange",function(a){return n.selectSymbolOptions(a.value)}),t.qZA()(),t.TgZ(29,"div",1)(30,"div",2)(31,"label",11),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"i",4),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"p-autoComplete",12),t.NdJ("completeMethod",function(a){return n.filterStock(a)}),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",1)(39,"div",2)(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t._UZ(43,"i",4),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"div",14)(46,"p-inputNumber",15),t.NdJ("ngModelChange",function(a){return n.investmentAmount=a}),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"p-slider",16),t.NdJ("ngModelChange",function(a){return n.investmentAmount=a}),t.qZA()()(),t.TgZ(49,"div",1)(50,"div",2)(51,"label"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._UZ(54,"i",4),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"div",14),t._UZ(57,"p-checkbox",17),t.qZA()(),t.YNc(58,at,9,12,"div",8),t.TgZ(59,"div",1)(60,"div",2)(61,"label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._UZ(64,"i",4),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"div",14),t._UZ(67,"p-checkbox",18),t.qZA()(),t.YNc(68,it,10,14,"div",8),t._UZ(69,"p-button",19),t.ALo(70,"translate"),t.ALo(71,"async"),t.qZA()),2&s&&(t.Q6J("formGroup",n.form),t.xp6(4),t.Oqu(t.lcZ(5,56,"form.label.startDate")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(7,58,"tooltip.startDate."+n.routeTitleKey))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("placeholder",t.lcZ(9,60,"form.label.startDate"))("readonlyInput",!0)("showIcon",!0),t.xp6(5),t.Oqu(t.lcZ(14,62,"form.label.endDate")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(16,64,"tooltip.endDate."+n.routeTitleKey))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("options",n.endDateOptions),t.xp6(1),t.Q6J("ngIf",(null==n.form.controls.endDateType.value?null:n.form.controls.endDateType.value.code)===n.DateEnum.SelectDate),t.xp6(1),t.Q6J("ngIf",(null==n.form.controls.endDateType.value?null:n.form.controls.endDateType.value.code)===n.DateEnum.MonthQuantity),t.xp6(1),t.Q6J("ngIf",(null==n.form.controls.endDateType.value?null:n.form.controls.endDateType.value.code)===n.DateEnum.YearsQuantity),t.xp6(4),t.Oqu(t.lcZ(25,66,"form.label.stocks.stocksList")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(27,68,"tooltip.stocksList"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("options",n.stockSymbolsListOptions),t.xp6(4),t.Oqu(t.lcZ(33,70,"form.label.stocks.stockSymbol")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(35,72,"tooltip.stockSymbol"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("suggestions",n.filteredStocks)("dropdown",n.isStockListAsDropdown)("forceSelection",!0)("placeholder",t.lcZ(37,74,"form.label.stocks.stockSymbol")),t.xp6(5),t.Oqu(t.lcZ(42,76,"form.label.amount")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(44,78,"tooltip.amount"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("ngModel",n.investmentAmount)("placeholder",t.lcZ(47,80,"form.label.amount"))("min",10)("max",1e4),t.xp6(2),t.Q6J("ngModel",n.investmentAmount)("min",10)("max",500)("step",10),t.xp6(4),t.Oqu(t.lcZ(53,82,"form.label.inflationMatter")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(55,84,"tooltip.inflationMatter"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("binary",!0),t.xp6(1),t.Q6J("ngIf",n.form.value.inflationMatter),t.xp6(4),t.Oqu(t.lcZ(63,86,"form.label.addInitialAmount")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(65,88,"tooltip.addInitialAmount"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("binary",!0),t.xp6(1),t.Q6J("ngIf",n.form.value.addInitialAmount),t.xp6(1),t.Q6J("label",t.lcZ(70,90,"button.submit"))("disabled",!n.form.valid)("loading",t.lcZ(71,92,n.isYahooLoading$)))},dependencies:[b.O5,p._Y,p.JJ,p.JL,p.sg,p.u,z.VS,K.f,H.zx,V.Lt,X.Rn,W.Qc,tt.iR,et.XZ,b.Ov,x.X$],styles:["@media only screen and (max-width: 992px){.hide-not-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 993px){.hide-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 577px){.hide-not-mobile[_ngcontent-%COMP%]{display:none!important}}.general-form[_ngcontent-%COMP%]{display:block;max-width:35rem;margin:0 auto}.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:.5rem;display:flex;align-items:center;justify-content:space-between}@media only screen and (max-width: 576px){.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]{flex-wrap:wrap}}.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;margin-right:1rem}@media only screen and (max-width: 576px){.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__label[_ngcontent-%COMP%]{width:100%;margin-right:0;margin-bottom:1rem}}.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__input[_ngcontent-%COMP%]{width:12rem;line-height:1.4}@media only screen and (max-width: 576px){.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__input[_ngcontent-%COMP%]{width:100%}}.general-form[_ngcontent-%COMP%]   .general-form__submit[_ngcontent-%COMP%]{margin-top:2rem;width:12rem;display:block}"],changeDetection:0}),y);U=(0,F.gn)([(0,w.c)()],U);var P=c(420),lt=c(805);const rt=["tableWrapper"];function ct(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"th",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels."+n)," ")}}function pt(e,s){if(1&e&&(t.TgZ(0,"th",10),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"p-sortIcon",11),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw(2);t.Q6J("pSortableColumn",o.RowKeysEnum.Date),t.xp6(1),t.hij(" ",t.lcZ(2,2,"labels."+n)," ")}}function mt(e,s){if(1&e&&(t.ynx(0),t.YNc(1,ct,4,3,"ng-container",7),t.YNc(2,pt,4,4,"ng-template",null,8,t.W1O),t.BQk()),2&e){const n=s.index,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",0!==n)("ngIfElse",o)}}function dt(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,mt,4,2,"ng-container",6),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.theadList)}}function ut(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"td",9),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(2),t.Oqu(o[n])}}function ft(e,s){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o[n]," ")}}function gt(e,s){if(1&e&&(t.ynx(0),t.YNc(1,ut,3,1,"ng-container",7),t.YNc(2,ft,2,1,"ng-template",null,8,t.W1O),t.BQk()),2&e){const n=s.index,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",0!==n)("ngIfElse",o)}}function ht(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,gt,4,2,"ng-container",6),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.theadList)}}const _t=function(){return[12,24,36,48,60]};let Tt=(()=>{var e;class s{constructor(o,a){this.storage=o,this.renderer=a,this.rows=[],this.MOBILE_HINT_KEY="hnt",this.theadList=[],this.RowKeysEnum=r,this.scrollClass="h-scroll"}ngOnInit(){this.theadList=Object.keys(this.rows[0])}ngAfterViewInit(){this.storage.getItem(this.MOBILE_HINT_KEY)||this.renderer.addClass(this.tableWrapperElement.nativeElement,this.scrollClass)}sortByDate(o){o.field===r.Date&&o.data.sort((a,l)=>{const d=new Date(a[o.field]).getTime(),u=new Date(l[o.field]).getTime();let g;return g=null==d&&null!=u?-1:null!=d&&null==u?1:null==d&&null==u?0:d<u?1:d>u?-1:0,o.order*g})}removeClass(o){this.renderer.removeClass(o,this.scrollClass),this.storage.setItem(this.MOBILE_HINT_KEY,"f")}}return(e=s).\u0275fac=function(o){return new(o||e)(t.Y36(j.H3),t.Y36(t.Qsj))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-general-table"]],viewQuery:function(o,a){if(1&o&&t.Gf(rt,7),2&o){let l;t.iGM(l=t.CRH())&&(a.tableWrapperElement=l.first)}},inputs:{rows:"rows",language:"language"},decls:6,vars:7,consts:[[1,"card","p-fluid","general-table"],[3,"click"],["tableWrapper",""],["styleClass","p-datatable-sm p-datatable-striped",3,"value","scrollable","paginator","rows","rowsPerPageOptions","customSort","sortFunction"],["pTemplate","header"],["pTemplate","body"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["firstThTpl",""],[2,"min-width","70px"],["pFrozenColumn","",2,"min-width","100px",3,"pSortableColumn"],["field","code"],["pFrozenColumn","",2,"min-width","100px"]],template:function(o,a){if(1&o){const l=t.EpF();t.TgZ(0,"div",0)(1,"div",1,2),t.NdJ("click",function(){t.CHM(l);const u=t.MAs(2);return t.KtG(a.removeClass(u))}),t.TgZ(3,"p-table",3),t.NdJ("sortFunction",function(u){return a.sortByDate(u)}),t.YNc(4,dt,2,1,"ng-template",4),t.YNc(5,ht,2,1,"ng-template",5),t.qZA()()()}2&o&&(t.xp6(3),t.Q6J("value",a.rows)("scrollable",!0)("paginator",!0)("rows",12)("rowsPerPageOptions",t.DdM(6,_t))("customSort",!0))},dependencies:[b.sg,b.O5,P.iA,lt.jx,P.lQ,P.on,P.fz,x.X$],styles:['@media only screen and (max-width: 992px){.hide-not-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 993px){.hide-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 577px){.hide-not-mobile[_ngcontent-%COMP%]{display:none!important}}.general-table[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2rem}.general-table[_ngcontent-%COMP%]   .h-scroll[_ngcontent-%COMP%]{position:relative}@media only screen and (max-width: 576px){.general-table[_ngcontent-%COMP%]   .h-scroll[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.3) url(hscroll.d318fdd231f757fb.png) no-repeat center 10%;background-size:10rem;z-index:1}}'],changeDetection:0}),s})();var B=c(8794);let vt=(()=>{var e;class s{constructor(o){this.translateService=o,this.chartTextColor="primary"}ngOnInit(){this.prepareChartData()}prepareChartData(){const o=[],a=this.rows.reduce((i,m)=>(o.push(m.date),i[r.Price].push(m.price),i[r.InvestedTotal].push(m.investedTotal),i[r.PortfolioTotal].push(m.portfolioTotal),i[r.PercentTotal].push(m.percentTotal),i[r.PercentTotalAbsolute].push(m.percentTotalAbsolute),i[r.TotalInflation].push(m.totalInflation),i[r.TotalMinusInflation].push(m[r.TotalMinusInflation]),i),{[r.Price]:[],[r.InvestedTotal]:[],[r.PortfolioTotal]:[],[r.PercentTotal]:[],[r.PercentTotalAbsolute]:[],[r.TotalInflation]:[],[r.TotalMinusInflation]:[]}),l=this.translateService.instant("labels.portfolioTotal"),d=this.translateService.instant("labels.investedTotal"),u=this.translateService.instant("labels.percentTotal"),g=this.translateService.instant("labels.percentTotalAbsolute"),T=this.translateService.instant("labels.totalMinusInflation"),Z=this.translateService.instant("labels.totalInflation"),v=this.fieldsToShow.map((i,m)=>({label:this.translateService.instant(`labels.${i}`),data:a[i],borderWidth:2,fill:!0,tension:.4,borderColor:this.colors[m],backgroundColor:this.colors[m]}));this.data={labels:o,datasets:v},this.options={maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:this.chartTextColor,boxHeight:20,boxWidth:20,borderRadius:5,useBorderRadius:!0}},tooltip:{callbacks:{label:function(i){switch(i.dataset.label){case l:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${d}: ${f(a.investedTotal[i.dataIndex])}`,`- ${u}: ${f(a.percentTotal[i.dataIndex])}`,`- ${g}: ${f(a.percentTotalAbsolute[i.dataIndex])}`];case d:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${u}: ${f(a.percentTotal[i.dataIndex])}`,`- ${g}: ${f(a.percentTotalAbsolute[i.dataIndex])}`];case u:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${g}: ${f(a.percentTotalAbsolute[i.dataIndex])}`];case g:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${u}: ${f(a.percentTotal[i.dataIndex])}`];case T:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${Z}: ${f(a.totalInflation[i.dataIndex])}`];default:return[`${i.dataset.label}: ${i.formattedValue}`]}}}}},scales:{x:{ticks:{color:this.chartTextColor},grid:{display:!1}},y:{ticks:{color:this.chartTextColor},grid:{display:!1}}}}}}return(e=s).\u0275fac=function(o){return new(o||e)(t.Y36(x.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-general-chart"]],inputs:{rows:"rows",fieldsToShow:"fieldsToShow",colors:"colors"},decls:2,vars:2,consts:[[1,"card"],["type","line",3,"data","options"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"p-chart",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("data",a.data)("options",a.options))},dependencies:[B.C],changeDetection:0}),s})(),Ct=(()=>{var e;class s{constructor(o){this.translateService=o}ngOnChanges(o){o.resultRow&&(this.colors=this.colorsCheck(),this.data=this.prepareData(),this.options={plugins:{legend:{labels:{usePointStyle:!0}}}})}prepareData(){const{labels:o,data:a}=this.fieldsToShow.reduce((l,d)=>(l.labels.push(this.translateService.instant(`labels.${d}`)),l.data.push(this.resultRow[d]),l),{labels:[],data:[]});return{labels:o,datasets:[{data:a,backgroundColor:this.colors}]}}colorsCheck(){return this.fieldsToShow.map((o,a)=>this.resultRow[o]>0?this.colors[a]:"red")}}return(e=s).\u0275fac=function(o){return new(o||e)(t.Y36(x.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-pie-chart"]],inputs:{resultRow:"resultRow",colors:"colors",fieldsToShow:"fieldsToShow"},features:[t.TTD],decls:1,vars:2,consts:[["type","pie",3,"data","options"]],template:function(o,a){1&o&&t._UZ(0,"p-chart",0),2&o&&t.Q6J("data",a.data)("options",a.options)},dependencies:[B.C],changeDetection:0}),s})();var k;function bt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",11)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",12),t._UZ(8,"i",13),t.qZA(),t.TgZ(9,"div",14),t.NdJ("click",function(){t.CHM(n),t.oxw();const a=t.MAs(6),l=t.oxw();return t.KtG(l.scrollTo(a))}),t._UZ(10,"i",15),t.qZA()()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"texts.stocksInfoText1")," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"texts.stocksInfoText2")," "))}function xt(e,s){if(1&e&&t._UZ(0,"app-pie-chart",21),2&e){const n=t.oxw(3);t.Q6J("resultRow",n.resultRow)("colors",n.dataColors)("fieldsToShow",n.fieldToShow)}}function yt(e,s){if(1&e&&(t.TgZ(0,"div",16)(1,"div",17)(2,"p"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"p",18),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"p",18),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"p",18)(18,"b"),t._uU(19),t.qZA()(),t.TgZ(20,"p"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"p",18)(24,"b"),t._uU(25),t.qZA()(),t.TgZ(26,"p"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"p",18)(30,"b"),t._uU(31),t.qZA()()(),t.TgZ(32,"div",19),t.YNc(33,xt,1,3,"app-pie-chart",20),t.qZA()()),2&e){const n=t.oxw().ngIf,o=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,16,"texts.stocksInfoText3")),t.xp6(3),t.hij(" ",o.resultsInfo.months+" "+t.lcZ(7,18,"form.label.m")+" ("+o.resultsInfo.years+" "+t.lcZ(8,20,"form.label.y")," ) "),t.xp6(4),t.Oqu(t.lcZ(11,22,"texts.stocksInfoText4")),t.xp6(3),t.Oqu(o.resultsInfo.company),t.xp6(2),t.Oqu(t.lcZ(16,24,"texts.stocksInfoText5")),t.xp6(4),t.hij("",o.resultsInfo.investedTotal,"$"),t.xp6(2),t.Oqu(t.lcZ(22,26,"texts.stocksInfoText6")),t.xp6(3),t.Udp("color",o.resultsInfo.portfolioTotal<0?"red":"green"),t.xp6(1),t.hij("",o.resultsInfo.portfolioTotal,"$"),t.xp6(2),t.Oqu(t.lcZ(28,28,"texts.stocksInfoText7")),t.xp6(3),t.Udp("color",o.resultsInfo.percentTotal<0?"red":"green"),t.xp6(1),t.AsE("",o.resultsInfo.percentTotal,"% (",o.resultsInfo.percentTotalAbsolute,"$)"),t.xp6(2),t.Q6J("ngIf",n.isChartUpdated)}}function kt(e,s){if(1&e&&t._UZ(0,"app-general-chart",25),2&e){const n=t.oxw(3);t.Q6J("rows",n.rows)("fieldsToShow",n.fieldToShow)("colors",n.dataColors)}}function Zt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"div",22),t.YNc(2,kt,1,3,"app-general-chart",23),t.qZA(),t.TgZ(3,"div",22),t._UZ(4,"app-general-table",24),t.qZA(),t.BQk()),2&e){const n=t.oxw().ngIf,o=t.oxw();t.xp6(2),t.Q6J("ngIf",n.isChartUpdated),t.xp6(2),t.Q6J("rows",o.rows)("language",o.languageService.selectedLanguage)}}function At(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t.YNc(3,bt,11,6,"div",4),t.YNc(4,yt,34,30,"div",5),t.qZA(),t.TgZ(5,"div",6,7)(7,"div",8)(8,"app-general-form",9),t.NdJ("formSubmit",function(a){t.CHM(n);const l=t.oxw();return t.KtG(l.getStocksData(a))}),t.qZA()()()(),t.YNc(9,Zt,5,3,"ng-container",10),t.qZA()}if(2&e){const n=s.ngIf,o=t.oxw();t.xp6(3),t.Q6J("ngIf",!o.rows.length),t.xp6(1),t.Q6J("ngIf",o.rows.length),t.xp6(5),t.Q6J("ngIf",o.rows.length&&!1===n.isYahooLoading)}}const wt=function(e,s){return{isYahooLoading:e,isChartUpdated:s}};let q=((k=class{constructor(s,n,o){this.apiService=s,this.languageService=n,this.loaderService=o,this.colorOpacity=.6,this.rows=[],this.dataColors=[`rgb(17 138 178 / ${this.colorOpacity})`,`rgb(255 209 102 / ${this.colorOpacity})`,`rgb(6 214 160 / ${this.colorOpacity})`,`rgb(7 59 76 / ${this.colorOpacity})`,`rgb(239 71 111 / ${this.colorOpacity})`]}getStocksData(s){this.apiService.getStockData(s.stockSymbol.code,s.startDate,s.endDate).pipe((0,w.t)(this)).subscribe(n=>{this.rows=this.prepareRows(n,s),this.resultRow=this.rows[this.rows.length-1],this.resultsInfo=this.prepareResultsInfo(s,this.resultRow);const o=Object.keys(this.rows[0]);this.fieldToShow=[r.PercentTotalAbsolute,r.InvestedTotal,r.PortfolioTotal,r.TotalMinusInflation].filter(a=>o.includes(a))})}scrollTo(s){s.scrollIntoView({behavior:"smooth"})}prepareRows(s,n){const o=n.investmentAmount,a=n.addInitialAmount&&n.investmentAmountInitial||o,l=s.chart.result[0].indicators.quote[0],d=s.chart.result[0].timestamp,u=(0,O.Xn)(n.startDate,n.endDate);return(0,O.wZ)(d,u).reduce((T,Z,v)=>{const i=l.close[Z];let m,C,A;0===v?(C=a,m=o,A=C/i):(m=n.inflationMatter?function E(e,s){return e+e*s/100/12/(1+.004*s)}(T[v-1][r.InvestmentAmount],n.inflationValue):o,C=T[v-1][r.InvestedTotal]+m,A=m/i+T[v-1][r.StocksTotal]);const L=A*i,D=L-C,J=0===C?0:D/C*100,$={date:this.getDateByTimestampIndex(d,Z),price:f(i),...n.inflationMatter&&{investmentAmount:f(m)},investedTotal:f(C),stocksTotal:f(A),portfolioTotal:f(L),percentTotalAbsolute:f(D),percentTotal:f(J)};return T.push($),T},[])}prepareResultsInfo(s,n){return{company:s.stockSymbol.name,months:this.rows.length,years:f(this.rows.length/12),investedTotal:n[r.InvestedTotal],portfolioTotal:n[r.PortfolioTotal],percentTotal:n[r.PercentTotal],percentTotalAbsolute:n[r.PercentTotalAbsolute]}}getDateByTimestampIndex(s,n){return new Date(1e3*s[n]).toLocaleDateString("en-US")}}).\u0275fac=function(s){return new(s||k)(t.Y36(M.sM),t.Y36(M.TS),t.Y36(M.D1))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-stocks"]],decls:3,vars:8,consts:[["class","stocks",4,"ngIf"],[1,"stocks"],[1,"stocks-first-row"],[1,"card","stocks-info"],["class","stocks-info-text",4,"ngIf"],["class","stocks-info-results",4,"ngIf"],[1,"stocks-form"],["formAnchor",""],[1,"card"],[3,"formSubmit"],[4,"ngIf"],[1,"stocks-info-text"],[1,"stocks-info-icon","hide-not-any-desktop"],[1,"pi","pi-chevron-right"],[1,"stocks-info-icon","stocks-info-icon-button","hide-any-desktop",3,"click"],[1,"pi","pi-chevron-down"],[1,"stocks-info-results"],[1,"stocks-info-results-text"],[1,"stocks-info-value"],[1,"stocks-info-results-chart"],[3,"resultRow","colors","fieldsToShow",4,"ngIf"],[3,"resultRow","colors","fieldsToShow"],[1,"stocks-card"],[3,"rows","fieldsToShow","colors",4,"ngIf"],[3,"rows","language"],[3,"rows","fieldsToShow","colors"]],template:function(s,n){1&s&&(t.YNc(0,At,10,3,"div",0),t.ALo(1,"async"),t.ALo(2,"async")),2&s&&t.Q6J("ngIf",t.WLB(5,wt,t.lcZ(1,1,n.loaderService.isYahooLoading$),t.lcZ(2,3,n.loaderService.isChartUpdated$)))},dependencies:[b.O5,U,Tt,vt,Ct,b.Ov,x.X$],styles:["@media only screen and (max-width: 992px){.hide-not-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 993px){.hide-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 577px){.hide-not-mobile[_ngcontent-%COMP%]{display:none!important}}.stocks[_ngcontent-%COMP%]   .stocks-first-row[_ngcontent-%COMP%]{display:flex;gap:2rem;flex-wrap:wrap}.stocks[_ngcontent-%COMP%]   .stocks-form[_ngcontent-%COMP%]{display:block;width:calc(50% - 1rem)}@media only screen and (max-width: 992px){.stocks[_ngcontent-%COMP%]   .stocks-form[_ngcontent-%COMP%]{width:100%}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]{width:calc(50% - 1rem);display:flex;flex-direction:column;justify-content:center;align-items:center}@media only screen and (max-width: 992px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]{width:100%}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]{max-width:40rem;font-size:1.2rem;line-height:1.5;display:flex;flex-direction:column;text-align:center;justify-content:center;align-items:center;gap:2rem}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]   .stocks-info-icon[_ngcontent-%COMP%]{color:var(--primary-color);width:4rem;height:4rem;display:flex;align-items:center;justify-content:center}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]   .stocks-info-icon.stocks-info-icon-button[_ngcontent-%COMP%]{cursor:pointer;background:var(--primary-color);color:#fff;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:50%}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]   .stocks-info-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]{max-width:40rem;display:flex;justify-content:space-between;align-items:center}@media only screen and (max-width: 576px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]{flex-wrap:wrap}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]{line-height:1.5;width:50%}@media only screen and (max-width: 576px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]{width:100%}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]   .stocks-info-value[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--primary-color);text-align:right;margin-bottom:1rem;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-chart[_ngcontent-%COMP%]{width:250px}@media only screen and (max-width: 576px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-chart[_ngcontent-%COMP%]{margin:2rem auto}}.stocks[_ngcontent-%COMP%]   .stocks-card[_ngcontent-%COMP%]{margin-top:2rem;width:calc(100vw - 4rem)}"],changeDetection:0}),k);q=(0,F.gn)([(0,w.c)()],q);const Ot=[{path:"",component:q}];let Mt=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[S.Bz.forChild(Ot),S.Bz]}),s})(),It=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[M.sM],imports:[b.ez,Mt,I.Iu,I.C1,I.yu,x.aw,I.NA]}),s})()}}]);