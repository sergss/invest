"use strict";(self.webpackChunkinvest=self.webpackChunkinvest||[]).push([[605],{3605:(St,U,r)=>{r.r(U),r.d(U,{StocksModule:()=>Ot});var T=r(6895),O=r(4026),M=r(3786),q=r(7582),l=(()=>{return(e=l||(l={})).Date="date",e.Price="price",e.InvestedTotal="investedTotal",e.StocksTotal="stocksTotal",e.PercentTotalAbsolute="percentTotalAbsolute",e.PercentTotal="percentTotal",e.PortfolioTotal="portfolioTotal",e.TotalInflation="totalInflation",e.TotalMinusInflation="totalMinusInflation",e.InvestmentAmount="investmentAmount",l;var e})(),_=(()=>{return(e=_||(_={})).Custom="custom",e.Top500="top500",e.All="all",_;var e})(),Z=r(5264),w=r(6316);function u(e){return Math.round(100*e)/100}var t=r(8274),A=r(1832),p=r(4006),j=r(8532),g=(()=>{return(e=g||(g={})).UntilNow="untilNow",e.SelectDate="selectDate",e.MonthQuantity="monthQuantity",e.YearsQuantity="yearsQuantity",g;var e})();function L(e){const s=e.indexOf("["),n=e.indexOf("]");return-1!==s&&-1!==n?e.slice(s+1,n):""}var x,J=r(2768),D=r(3606),C=r(4463),B=r(5830),E=r(1008),R=r(5593),z=r(1458),X=r(7188),H=r(4294),K=r(8177),W=r(1989);function V(e,s){1&e&&(t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"p-calendar",20),t.ALo(3,"translate"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("placeholder",t.lcZ(3,3,"form.label.endDate"))("readonlyInput",!0)("showIcon",!0))}function tt(e,s){1&e&&(t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"p-inputNumber",21),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("placeholder","N "+t.lcZ(3,4,"form.label.m"))("min",1)("max",600)("suffix"," "+t.lcZ(4,6,"form.label.m")))}function et(e,s){1&e&&(t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"p-inputNumber",22),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("placeholder","N "+t.lcZ(3,4,"form.label.y"))("min",1)("max",50)("suffix"," "+t.lcZ(4,6,"form.label.y")))}function nt(e,s){1&e&&(t.TgZ(0,"div",1)(1,"div",2)(2,"label",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"i",4),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",14),t._UZ(8,"p-inputNumber",24),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,8,"form.label.inflationValue")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(6,10,"tooltip.inflationValue"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("placeholder","0%")("min",0)("max",36)("suffix","%"))}function ot(e,s){1&e&&(t.TgZ(0,"div",1)(1,"div",2)(2,"label",25),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"i",4),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",14),t._UZ(8,"p-inputNumber",26),t.ALo(9,"translate"),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,8,"form.label.amountInitial")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(6,10,"tooltip.amountInitial"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("placeholder",t.lcZ(9,12,"form.label.amountInitial"))("min",0)("max",1e6)("minFractionDigits",0))}let Q=((x=class{constructor(s,n,o){this.translateService=s,this.router=n,this.loaderService=o,this.formSubmit=new t.vpe,this.stocksCustom=D.xB.map(c=>({name:c,code:L(c)})),this.stocksTop500=D.aj.map(c=>({name:c,code:L(c)})),this.stocksAll=D.vF.map(c=>({name:c,code:L(c)})),this.filteredStocks=[],this.endDateOptions=this.getEndDateOptions(),this.investmentAmount=100,this.routeTitleKey=j.d.Empty,this.DateEnum=g,this.isYahooLoading$=this.loaderService.isYahooLoading$,this.stocks=this.stocksCustom,this.stockSymbolsListOptions=this.getSymbolListOptions(),this.isStockListAsDropdown=!0,this.routeTitleKey=(0,J.T)(this.router.routerState.root),this.router.events.pipe((0,Z.t)(this)).subscribe(c=>{c instanceof M.m2&&(this.routeTitleKey=(0,J.T)(this.router.routerState.root))});const m=(0,w.oS)((new Date).getTime(),240);this.form=new p.cw({startDate:new p.NI(new Date(m),p.kI.required),endDateType:new p.NI(this.endDateOptions[0],p.kI.required),endDate:new p.NI(new Date("01-01-2023"),p.kI.required),monthQuantity:new p.NI(12,p.kI.required),yearsQuantity:new p.NI(1,p.kI.required),stockSymbol:new p.NI(this.stocks[0],[p.kI.required]),addInitialAmount:new p.NI(!1),investmentAmountInitial:new p.NI(0),investmentAmount:new p.NI(this.investmentAmount,p.kI.required),inflationMatter:new p.NI(!1),inflationValue:new p.NI(0)}),this.translateService.onLangChange.pipe((0,Z.t)(this)).subscribe(()=>{this.endDateOptions=this.getEndDateOptions(),this.stockSymbolsListOptions=this.getSymbolListOptions()})}filterStock(s){const n=[],o=s.query.toLowerCase();for(let a=0;a<this.stocks.length;a++){const m=this.stocks[a];m.name.toLowerCase().includes(o)&&n.push(m)}this.filteredStocks=n}submitForm(){const s=this.patchEndDate();this.formSubmit.emit(s)}selectSymbolOptions(s){switch(s.code){case _.Custom:this.isStockListAsDropdown=!0,this.stocks=[...this.stocksCustom];break;case _.Top500:this.isStockListAsDropdown=!0,this.stocks=[...this.stocksTop500];break;case _.All:this.isStockListAsDropdown=!1,this.stocks=[...this.stocksAll]}this.form.controls.stockSymbol.patchValue(null),this.form.controls.stockSymbol.markAsDirty()}getEndDateOptions(){return[{name:this.translateService.instant("form.label.untilNow"),code:g.UntilNow},{name:this.translateService.instant("form.label.selectDate"),code:g.SelectDate},{name:this.translateService.instant("form.label.monthQuantity"),code:g.MonthQuantity},{name:this.translateService.instant("form.label.yearsQuantity"),code:g.YearsQuantity}]}getSymbolListOptions(){return[{name:this.translateService.instant("form.label.stocks.symbolListOptions.custom"),code:_.Custom},{name:this.translateService.instant("form.label.stocks.symbolListOptions.top500"),code:_.Top500},{name:this.translateService.instant("form.label.stocks.symbolListOptions.all"),code:_.All}]}patchEndDate(){if(this.form.value.endDateType.code!==g.SelectDate){const n=this.getEndDate();this.form.patchValue({endDate:n})}return this.form.value}getEndDate(){const s=this.form.value.startDate.getTime();switch(this.form.value.endDateType.code){case g.MonthQuantity:return new Date((0,w.NB)(s,this.form.value.monthQuantity));case g.YearsQuantity:return new Date((0,w.NB)(s,12*this.form.value.yearsQuantity));default:return new Date}}}).\u0275fac=function(s){return new(s||x)(t.Y36(C.sK),t.Y36(M.F0),t.Y36(A.D1))},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-general-form"]],outputs:{formSubmit:"formSubmit"},decls:72,vars:94,consts:[[1,"p-fluid","general-form",3,"formGroup","ngSubmit"],[1,"general-form__field"],[1,"general-form__label"],["for","startDate"],[1,"pi","pi-question","info-icon",3,"popperLoose","popperLooseTrigger","popperLoosePlacement"],["formControlName","startDate","id","startDate","view","month","dateFormat","mm/yy",1,"general-form__input",3,"placeholder","readonlyInput","showIcon"],["for","endDateType"],["formControlName","endDateType","id","endDateType","optionLabel","name",1,"general-form__input",3,"options"],["class","general-form__field",4,"ngIf"],["for","stockSymbolsList"],["id","stockSymbolsList","optionLabel","name",1,"general-form__input",3,"options","onChange"],["for","stockSymbol"],["formControlName","stockSymbol","id","stockSymbol","field","name",1,"general-form__input",3,"suggestions","dropdown","forceSelection","placeholder","completeMethod"],["for","investmentAmount"],[1,"general-form__input"],["formControlName","investmentAmount","id","investmentAmount","inputId","stacked","mode","currency","currency","USD",1,"w-full","input-with-slider",3,"ngModel","placeholder","min","max","ngModelChange"],["formControlName","investmentAmount",1,"w-full","input-with-slider",3,"ngModel","min","max","step","ngModelChange"],["formControlName","inflationMatter",3,"binary"],["formControlName","addInitialAmount",3,"binary"],["type","submit","icon","pi pi-check",1,"p-button-sm","general-form__submit",3,"label","disabled","loading"],["formControlName","endDate","view","month","dateFormat","mm/yy",1,"general-form__input",3,"placeholder","readonlyInput","showIcon"],["formControlName","monthQuantity",1,"general-form__input",3,"placeholder","min","max","suffix"],["formControlName","yearsQuantity",1,"general-form__input",3,"placeholder","min","max","suffix"],["for","inflationValue"],["formControlName","inflationValue","id","inflationValue",1,"general-form__input",3,"placeholder","min","max","suffix"],["for","investmentAmountInitial"],["formControlName","investmentAmountInitial","id","investmentAmountInitial","inputId","stacked","mode","currency","currency","USD",1,"general-form__input",3,"placeholder","min","max","minFractionDigits"]],template:function(s,n){1&s&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.submitForm()}),t.TgZ(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"i",4),t.ALo(7,"translate"),t.qZA(),t._UZ(8,"p-calendar",5),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",1)(11,"div",2)(12,"label",6),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"i",4),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"p-dropdown",7),t.qZA(),t.YNc(18,V,4,5,"div",8),t.YNc(19,tt,5,8,"div",8),t.YNc(20,et,5,8,"div",8),t.TgZ(21,"div",1)(22,"div",2)(23,"label",9),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"i",4),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"p-dropdown",10),t.NdJ("onChange",function(a){return n.selectSymbolOptions(a.value)}),t.qZA()(),t.TgZ(29,"div",1)(30,"div",2)(31,"label",11),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"i",4),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"p-autoComplete",12),t.NdJ("completeMethod",function(a){return n.filterStock(a)}),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",1)(39,"div",2)(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t._UZ(43,"i",4),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"div",14)(46,"p-inputNumber",15),t.NdJ("ngModelChange",function(a){return n.investmentAmount=a}),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"p-slider",16),t.NdJ("ngModelChange",function(a){return n.investmentAmount=a}),t.qZA()()(),t.TgZ(49,"div",1)(50,"div",2)(51,"label"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._UZ(54,"i",4),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"div",14),t._UZ(57,"p-checkbox",17),t.qZA()(),t.YNc(58,nt,9,12,"div",8),t.TgZ(59,"div",1)(60,"div",2)(61,"label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._UZ(64,"i",4),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"div",14),t._UZ(67,"p-checkbox",18),t.qZA()(),t.YNc(68,ot,10,14,"div",8),t._UZ(69,"p-button",19),t.ALo(70,"translate"),t.ALo(71,"async"),t.qZA()),2&s&&(t.Q6J("formGroup",n.form),t.xp6(4),t.Oqu(t.lcZ(5,56,"form.label.startDate")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(7,58,"tooltip.startDate."+n.routeTitleKey))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("placeholder",t.lcZ(9,60,"form.label.startDate"))("readonlyInput",!0)("showIcon",!0),t.xp6(5),t.Oqu(t.lcZ(14,62,"form.label.endDate")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(16,64,"tooltip.endDate."+n.routeTitleKey))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("options",n.endDateOptions),t.xp6(1),t.Q6J("ngIf",(null==n.form.controls.endDateType.value?null:n.form.controls.endDateType.value.code)===n.DateEnum.SelectDate),t.xp6(1),t.Q6J("ngIf",(null==n.form.controls.endDateType.value?null:n.form.controls.endDateType.value.code)===n.DateEnum.MonthQuantity),t.xp6(1),t.Q6J("ngIf",(null==n.form.controls.endDateType.value?null:n.form.controls.endDateType.value.code)===n.DateEnum.YearsQuantity),t.xp6(4),t.Oqu(t.lcZ(25,66,"form.label.stocks.stocksList")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(27,68,"tooltip.stocksList"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("options",n.stockSymbolsListOptions),t.xp6(4),t.Oqu(t.lcZ(33,70,"form.label.stocks.stockSymbol")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(35,72,"tooltip.stockSymbol"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("suggestions",n.filteredStocks)("dropdown",n.isStockListAsDropdown)("forceSelection",!0)("placeholder",t.lcZ(37,74,"form.label.stocks.stockSymbol")),t.xp6(5),t.Oqu(t.lcZ(42,76,"form.label.amount")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(44,78,"tooltip.amount"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("ngModel",n.investmentAmount)("placeholder",t.lcZ(47,80,"form.label.amount"))("min",10)("max",1e4),t.xp6(2),t.Q6J("ngModel",n.investmentAmount)("min",10)("max",500)("step",10),t.xp6(4),t.Oqu(t.lcZ(53,82,"form.label.inflationMatter")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(55,84,"tooltip.inflationMatter"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("binary",!0),t.xp6(1),t.Q6J("ngIf",n.form.value.inflationMatter),t.xp6(4),t.Oqu(t.lcZ(63,86,"form.label.addInitialAmount")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(65,88,"tooltip.addInitialAmount"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("binary",!0),t.xp6(1),t.Q6J("ngIf",n.form.value.addInitialAmount),t.xp6(1),t.Q6J("label",t.lcZ(70,90,"button.submit"))("disabled",!n.form.valid)("loading",t.lcZ(71,92,n.isYahooLoading$)))},dependencies:[T.O5,p._Y,p.JJ,p.JL,p.sg,p.u,B.VS,E.f,R.zx,z.Lt,X.Rn,H.Qc,K.iR,W.XZ,T.Ov,C.X$],styles:["@media only screen and (max-width: 992px){.hide-not-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 993px){.hide-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 577px){.hide-not-mobile[_ngcontent-%COMP%]{display:none!important}}.general-form[_ngcontent-%COMP%]{display:block;max-width:35rem;margin:0 auto}.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:.5rem;display:flex;align-items:center;justify-content:space-between}@media only screen and (max-width: 576px){.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]{flex-wrap:wrap}}.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;margin-right:1rem}@media only screen and (max-width: 576px){.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__label[_ngcontent-%COMP%]{width:100%;margin-right:0;margin-bottom:1rem}}.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__input[_ngcontent-%COMP%]{width:12rem;line-height:1.4}@media only screen and (max-width: 576px){.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__input[_ngcontent-%COMP%]{width:100%}}.general-form[_ngcontent-%COMP%]   .general-form__submit[_ngcontent-%COMP%]{margin-top:2rem;width:12rem;display:block}"],changeDetection:0}),x);Q=(0,q.gn)([(0,Z.c)()],Q);var st=r(7919),I=r(420),at=r(805);const it=["tableWrapper"];function lt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"th",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels."+n)," ")}}function rt(e,s){if(1&e&&(t.TgZ(0,"th",10),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"p-sortIcon",11),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw(2);t.Q6J("pSortableColumn",o.RowKeysEnum.Date),t.xp6(1),t.hij(" ",t.lcZ(2,2,"labels."+n)," ")}}function ct(e,s){if(1&e&&(t.ynx(0),t.YNc(1,lt,4,3,"ng-container",7),t.YNc(2,rt,4,4,"ng-template",null,8,t.W1O),t.BQk()),2&e){const n=s.index,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",0!==n)("ngIfElse",o)}}function pt(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,ct,4,2,"ng-container",6),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.theadList)}}function mt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"td",9),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(2),t.Oqu(o[n])}}function dt(e,s){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o[n]," ")}}function ut(e,s){if(1&e&&(t.ynx(0),t.YNc(1,mt,3,1,"ng-container",7),t.YNc(2,dt,2,1,"ng-template",null,8,t.W1O),t.BQk()),2&e){const n=s.index,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",0!==n)("ngIfElse",o)}}function ft(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,ut,4,2,"ng-container",6),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.theadList)}}const gt=function(){return[12,24,36,48,60]};let ht=(()=>{var e;class s{constructor(o,a){this.storage=o,this.renderer=a,this.rows=[],this.MOBILE_HINT_KEY="hnt",this.theadList=[],this.RowKeysEnum=l,this.scrollClass="h-scroll"}ngOnInit(){this.theadList=Object.keys(this.rows[0])}ngAfterViewInit(){this.storage.getItem(this.MOBILE_HINT_KEY)||this.renderer.addClass(this.tableWrapperElement.nativeElement,this.scrollClass)}sortByDate(o){o.field===l.Date&&o.data.sort((a,m)=>{const c=new Date(a[o.field]).getTime(),f=new Date(m[o.field]).getTime();let h;return h=null==c&&null!=f?-1:null!=c&&null==f?1:null==c&&null==f?0:c<f?1:c>f?-1:0,o.order*h})}removeClass(o){this.renderer.removeClass(o,this.scrollClass),this.storage.setItem(this.MOBILE_HINT_KEY,"f")}}return(e=s).\u0275fac=function(o){return new(o||e)(t.Y36(st.H3),t.Y36(t.Qsj))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-general-table"]],viewQuery:function(o,a){if(1&o&&t.Gf(it,7),2&o){let m;t.iGM(m=t.CRH())&&(a.tableWrapperElement=m.first)}},inputs:{rows:"rows",language:"language"},decls:6,vars:7,consts:[[1,"card","p-fluid","general-table"],[3,"click"],["tableWrapper",""],["styleClass","p-datatable-sm p-datatable-striped",3,"value","scrollable","paginator","rows","rowsPerPageOptions","customSort","sortFunction"],["pTemplate","header"],["pTemplate","body"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["firstThTpl",""],[2,"min-width","70px"],["pFrozenColumn","",2,"min-width","100px",3,"pSortableColumn"],["field","code"],["pFrozenColumn","",2,"min-width","100px"]],template:function(o,a){if(1&o){const m=t.EpF();t.TgZ(0,"div",0)(1,"div",1,2),t.NdJ("click",function(){t.CHM(m);const f=t.MAs(2);return t.KtG(a.removeClass(f))}),t.TgZ(3,"p-table",3),t.NdJ("sortFunction",function(f){return a.sortByDate(f)}),t.YNc(4,pt,2,1,"ng-template",4),t.YNc(5,ft,2,1,"ng-template",5),t.qZA()()()}2&o&&(t.xp6(3),t.Q6J("value",a.rows)("scrollable",!0)("paginator",!0)("rows",12)("rowsPerPageOptions",t.DdM(6,gt))("customSort",!0))},dependencies:[T.sg,T.O5,I.iA,at.jx,I.lQ,I.on,I.fz,C.X$],styles:['@media only screen and (max-width: 992px){.hide-not-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 993px){.hide-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 577px){.hide-not-mobile[_ngcontent-%COMP%]{display:none!important}}.general-table[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2rem}.general-table[_ngcontent-%COMP%]   .h-scroll[_ngcontent-%COMP%]{position:relative}@media only screen and (max-width: 576px){.general-table[_ngcontent-%COMP%]   .h-scroll[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.3) url(hscroll.d318fdd231f757fb.png) no-repeat center 10%;background-size:10rem;z-index:1}}'],changeDetection:0}),s})();var $=r(8794);let _t=(()=>{var e;class s{constructor(o){this.translateService=o,this.chartTextColor="primary"}ngOnInit(){this.prepareChartData()}prepareChartData(){const o=[],a=this.rows.reduce((i,d)=>(o.push(d.date),i[l.Price].push(d.price),i[l.InvestedTotal].push(d.investedTotal),i[l.PortfolioTotal].push(d.portfolioTotal),i[l.PercentTotal].push(d.percentTotal),i[l.PercentTotalAbsolute].push(d.percentTotalAbsolute),i[l.TotalInflation].push(d.totalInflation),i[l.TotalMinusInflation].push(d[l.TotalMinusInflation]),i),{[l.Price]:[],[l.InvestedTotal]:[],[l.PortfolioTotal]:[],[l.PercentTotal]:[],[l.PercentTotalAbsolute]:[],[l.TotalInflation]:[],[l.TotalMinusInflation]:[]}),m=this.translateService.instant("labels.portfolioTotal"),c=this.translateService.instant("labels.investedTotal"),f=this.translateService.instant("labels.percentTotal"),h=this.translateService.instant("labels.percentTotalAbsolute"),v=this.translateService.instant("labels.totalMinusInflation"),S=this.translateService.instant("labels.totalInflation"),k=this.fieldsToShow.map((i,d)=>({label:this.translateService.instant(`labels.${i}`),data:a[i],borderWidth:2,fill:!0,tension:.4,borderColor:this.colors[d],backgroundColor:this.colors[d]}));this.data={labels:o,datasets:k},this.options={maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:this.chartTextColor,boxHeight:20,boxWidth:20,borderRadius:5,useBorderRadius:!0}},tooltip:{callbacks:{label:function(i){switch(i.dataset.label){case m:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${c}: ${u(a.investedTotal[i.dataIndex])}`,`- ${f}: ${u(a.percentTotal[i.dataIndex])}`,`- ${h}: ${u(a.percentTotalAbsolute[i.dataIndex])}`];case c:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${f}: ${u(a.percentTotal[i.dataIndex])}`,`- ${h}: ${u(a.percentTotalAbsolute[i.dataIndex])}`];case f:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${h}: ${u(a.percentTotalAbsolute[i.dataIndex])}`];case h:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${f}: ${u(a.percentTotal[i.dataIndex])}`];case v:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${S}: ${u(a.totalInflation[i.dataIndex])}`];default:return[`${i.dataset.label}: ${i.formattedValue}`]}}}}},scales:{x:{ticks:{color:this.chartTextColor},grid:{display:!1}},y:{ticks:{color:this.chartTextColor},grid:{display:!1}}}}}}return(e=s).\u0275fac=function(o){return new(o||e)(t.Y36(C.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-general-chart"]],inputs:{rows:"rows",fieldsToShow:"fieldsToShow",colors:"colors"},decls:2,vars:2,consts:[[1,"card"],["type","line",3,"data","options"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"p-chart",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("data",a.data)("options",a.options))},dependencies:[$.C],changeDetection:0}),s})(),Tt=(()=>{var e;class s{constructor(o){this.translateService=o}ngOnChanges(o){o.resultRow&&(this.colors=this.colorsCheck(),this.data=this.prepareData(),this.options={plugins:{legend:{labels:{usePointStyle:!0}}}})}prepareData(){const{labels:o,data:a}=this.fieldsToShow.reduce((m,c)=>(m.labels.push(this.translateService.instant(`labels.${c}`)),m.data.push(this.resultRow[c]),m),{labels:[],data:[]});return{labels:o,datasets:[{data:a,backgroundColor:this.colors}]}}colorsCheck(){return this.fieldsToShow.map((o,a)=>this.resultRow[o]>0?this.colors[a]:"red")}}return(e=s).\u0275fac=function(o){return new(o||e)(t.Y36(C.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-pie-chart"]],inputs:{resultRow:"resultRow",colors:"colors",fieldsToShow:"fieldsToShow"},features:[t.TTD],decls:1,vars:2,consts:[["type","pie",3,"data","options"]],template:function(o,a){1&o&&t._UZ(0,"p-chart",0),2&o&&t.Q6J("data",a.data)("options",a.options)},dependencies:[$.C],changeDetection:0}),s})();var y;function Ct(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",11)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",12),t._UZ(8,"i",13),t.qZA(),t.TgZ(9,"div",14),t.NdJ("click",function(){t.CHM(n),t.oxw();const a=t.MAs(6),m=t.oxw();return t.KtG(m.scrollTo(a))}),t._UZ(10,"i",15),t.qZA()()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"texts.stocksInfoText1")," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"texts.stocksInfoText2")," "))}function vt(e,s){if(1&e&&t._UZ(0,"app-pie-chart",21),2&e){const n=t.oxw(3);t.Q6J("resultRow",n.resultRow)("colors",n.dataColors)("fieldsToShow",n.fieldToShow)}}function bt(e,s){if(1&e&&(t.TgZ(0,"div",16)(1,"div",17)(2,"p"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"p",18),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"p",18),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"p",18)(18,"b"),t._uU(19),t.qZA()(),t.TgZ(20,"p"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"p",18)(24,"b"),t._uU(25),t.qZA()(),t.TgZ(26,"p"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"p",18)(30,"b"),t._uU(31),t.qZA()()(),t.TgZ(32,"div",19),t.YNc(33,vt,1,3,"app-pie-chart",20),t.qZA()()),2&e){const n=t.oxw().ngIf,o=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,16,"texts.stocksInfoText3")),t.xp6(3),t.hij(" ",o.resultsInfo.months+" "+t.lcZ(7,18,"form.label.m")+" ("+o.resultsInfo.years+" "+t.lcZ(8,20,"form.label.y")," ) "),t.xp6(4),t.Oqu(t.lcZ(11,22,"texts.stocksInfoText4")),t.xp6(3),t.Oqu(o.resultsInfo.company),t.xp6(2),t.Oqu(t.lcZ(16,24,"texts.stocksInfoText5")),t.xp6(4),t.hij("",o.resultsInfo.investedTotal,"$"),t.xp6(2),t.Oqu(t.lcZ(22,26,"texts.stocksInfoText6")),t.xp6(3),t.Udp("color",o.resultsInfo.portfolioTotal<0?"red":"green"),t.xp6(1),t.hij("",o.resultsInfo.portfolioTotal,"$"),t.xp6(2),t.Oqu(t.lcZ(28,28,"texts.stocksInfoText7")),t.xp6(3),t.Udp("color",o.resultsInfo.percentTotal<0?"red":"green"),t.xp6(1),t.AsE("",o.resultsInfo.percentTotal,"% (",o.resultsInfo.percentTotalAbsolute,"$)"),t.xp6(2),t.Q6J("ngIf",n.isChartUpdated)}}function xt(e,s){if(1&e&&t._UZ(0,"app-general-chart",25),2&e){const n=t.oxw(3);t.Q6J("rows",n.rows)("fieldsToShow",n.fieldToShow)("colors",n.dataColors)}}function yt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"div",22),t.YNc(2,xt,1,3,"app-general-chart",23),t.qZA(),t.TgZ(3,"div",22),t._UZ(4,"app-general-table",24),t.qZA(),t.BQk()),2&e){const n=t.oxw().ngIf,o=t.oxw();t.xp6(2),t.Q6J("ngIf",n.isChartUpdated),t.xp6(2),t.Q6J("rows",o.rows)("language",o.languageService.selectedLanguage)}}function kt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t.YNc(3,Ct,11,6,"div",4),t.YNc(4,bt,34,30,"div",5),t.qZA(),t.TgZ(5,"div",6,7)(7,"div",8)(8,"app-general-form",9),t.NdJ("formSubmit",function(a){t.CHM(n);const m=t.oxw();return t.KtG(m.getStocksData(a))}),t.qZA()()()(),t.YNc(9,yt,5,3,"ng-container",10),t.qZA()}if(2&e){const n=s.ngIf,o=t.oxw();t.xp6(3),t.Q6J("ngIf",!o.rows.length),t.xp6(1),t.Q6J("ngIf",o.rows.length),t.xp6(5),t.Q6J("ngIf",o.rows.length&&!1===n.isYahooLoading)}}const Zt=function(e,s){return{isYahooLoading:e,isChartUpdated:s}};let N=((y=class{constructor(s,n,o){this.apiService=s,this.languageService=n,this.loaderService=o,this.colorOpacity=.6,this.rows=[],this.dataColors=[`rgb(17 138 178 / ${this.colorOpacity})`,`rgb(255 209 102 / ${this.colorOpacity})`,`rgb(6 214 160 / ${this.colorOpacity})`,`rgb(7 59 76 / ${this.colorOpacity})`,`rgb(239 71 111 / ${this.colorOpacity})`]}getStocksData(s){this.apiService.getStockData(s.stockSymbol.code,s.startDate,s.endDate).pipe((0,Z.t)(this)).subscribe(n=>{this.rows=this.prepareRows(n,s),this.resultRow=this.rows[this.rows.length-1],this.resultsInfo=this.prepareResultsInfo(s,this.resultRow);const o=Object.keys(this.rows[0]);this.fieldToShow=[l.PercentTotalAbsolute,l.InvestedTotal,l.PortfolioTotal,l.TotalMinusInflation].filter(a=>o.includes(a))})}scrollTo(s){s.scrollIntoView({behavior:"smooth"})}prepareRows(s,n){const o=n.investmentAmount,a=n.addInitialAmount&&n.investmentAmountInitial||o,m=s.chart.result[0].indicators.quote[0],c=s.chart.result[0].timestamp,f=(0,w.Xn)(n.startDate,n.endDate);return(0,w.wZ)(c,f).reduce((v,S,k)=>{const i=m.close[S];let d,b,P;0===k?(b=a,d=o,P=b/i):(d=n.inflationMatter?function F(e,s){return e+e*s/100/12/(1+.004*s)}(v[k-1][l.InvestmentAmount],n.inflationValue):o,b=v[k-1][l.InvestedTotal]+d,P=d/i+v[k-1][l.StocksTotal]);const Y=P*i,G=Y-b,Mt=0===b?0:G/b*100,It={date:this.getDateByTimestampIndex(c,S),price:u(i),...n.inflationMatter&&{investmentAmount:u(d)},investedTotal:u(b),stocksTotal:u(P),portfolioTotal:u(Y),percentTotalAbsolute:u(G),percentTotal:u(Mt)};return v.push(It),v},[])}prepareResultsInfo(s,n){return{company:s.stockSymbol.name,months:this.rows.length,years:u(this.rows.length/12),investedTotal:n[l.InvestedTotal],portfolioTotal:n[l.PortfolioTotal],percentTotal:n[l.PercentTotal],percentTotalAbsolute:n[l.PercentTotalAbsolute]}}getDateByTimestampIndex(s,n){return new Date(1e3*s[n]).toLocaleDateString("en-US")}}).\u0275fac=function(s){return new(s||y)(t.Y36(A.sM),t.Y36(A.TS),t.Y36(A.D1))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-stocks"]],decls:3,vars:8,consts:[["class","stocks",4,"ngIf"],[1,"stocks"],[1,"stocks-first-row"],[1,"card","stocks-info"],["class","stocks-info-text",4,"ngIf"],["class","stocks-info-results",4,"ngIf"],[1,"stocks-form"],["formAnchor",""],[1,"card"],[3,"formSubmit"],[4,"ngIf"],[1,"stocks-info-text"],[1,"stocks-info-icon","hide-not-any-desktop"],[1,"pi","pi-chevron-right"],[1,"stocks-info-icon","stocks-info-icon-button","hide-any-desktop",3,"click"],[1,"pi","pi-chevron-down"],[1,"stocks-info-results"],[1,"stocks-info-results-text"],[1,"stocks-info-value"],[1,"stocks-info-results-chart"],[3,"resultRow","colors","fieldsToShow",4,"ngIf"],[3,"resultRow","colors","fieldsToShow"],[1,"stocks-card"],[3,"rows","fieldsToShow","colors",4,"ngIf"],[3,"rows","language"],[3,"rows","fieldsToShow","colors"]],template:function(s,n){1&s&&(t.YNc(0,kt,10,3,"div",0),t.ALo(1,"async"),t.ALo(2,"async")),2&s&&t.Q6J("ngIf",t.WLB(5,Zt,t.lcZ(1,1,n.loaderService.isYahooLoading$),t.lcZ(2,3,n.loaderService.isChartUpdated$)))},dependencies:[T.O5,Q,ht,_t,Tt,T.Ov,C.X$],styles:["@media only screen and (max-width: 992px){.hide-not-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 993px){.hide-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 577px){.hide-not-mobile[_ngcontent-%COMP%]{display:none!important}}.stocks[_ngcontent-%COMP%]   .stocks-first-row[_ngcontent-%COMP%]{display:flex;gap:2rem;flex-wrap:wrap}.stocks[_ngcontent-%COMP%]   .stocks-form[_ngcontent-%COMP%]{display:block;width:calc(50% - 1rem)}@media only screen and (max-width: 992px){.stocks[_ngcontent-%COMP%]   .stocks-form[_ngcontent-%COMP%]{width:100%}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]{width:calc(50% - 1rem);display:flex;flex-direction:column;justify-content:center;align-items:center}@media only screen and (max-width: 992px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]{width:100%}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]{max-width:40rem;font-size:1.2rem;line-height:1.5;display:flex;flex-direction:column;text-align:center;justify-content:center;align-items:center;gap:2rem}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]   .stocks-info-icon[_ngcontent-%COMP%]{color:var(--primary-color);width:4rem;height:4rem;display:flex;align-items:center;justify-content:center}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]   .stocks-info-icon.stocks-info-icon-button[_ngcontent-%COMP%]{cursor:pointer;background:var(--primary-color);color:#fff;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:50%}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]   .stocks-info-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]{max-width:40rem;display:flex;justify-content:space-between;align-items:center}@media only screen and (max-width: 576px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]{flex-wrap:wrap}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]{line-height:1.5;width:50%}@media only screen and (max-width: 576px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]{width:100%}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]   .stocks-info-value[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--primary-color);text-align:right;margin-bottom:1rem;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-chart[_ngcontent-%COMP%]{width:250px}@media only screen and (max-width: 576px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-chart[_ngcontent-%COMP%]{margin:2rem auto}}.stocks[_ngcontent-%COMP%]   .stocks-card[_ngcontent-%COMP%]{margin-top:2rem;width:calc(100vw - 4rem)}"],changeDetection:0}),y);N=(0,q.gn)([(0,Z.c)()],N);const wt=[{path:"",component:N}];let At=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[M.Bz.forChild(wt),M.Bz]}),s})(),Ot=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[A.sM],imports:[T.ez,At,O.Iu,O.C1,O.yu,C.aw,O.NA]}),s})()}}]);