"use strict";(self.webpackChunkinvest=self.webpackChunkinvest||[]).push([[148],{5148:(ht,U,l)=>{l.r(U),l.d(U,{StocksModule:()=>ft});var y=l(6895),w=l(9561),Z=l(3786),q=l(7582),r=l(3953),b=l(5264),A=l(6316);function p(o){return Math.round(100*o)/100}var t=l(8274),x=l(1832),c=l(4006),R=l(8532),f=(()=>{return(o=f||(f={})).UntilNow="untilNow",o.SelectDate="selectDate",o.MonthQuantity="monthQuantity",o.YearsQuantity="yearsQuantity",f;var o})();function P(o){const n=o.indexOf("["),e=o.indexOf("]");return-1!==n&&-1!==e?o.slice(n+1,e):""}var _,J=l(2768),L=l(3606),h=l(4463),F=l(5830),G=l(1008),K=l(5593),j=l(1458),E=l(7188),B=l(4294),X=l(8177),z=l(1989);function V(o,n){1&o&&(t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"p-calendar",19),t.ALo(3,"translate"),t.qZA()),2&o&&(t.xp6(2),t.Q6J("placeholder",t.lcZ(3,3,"form.label.endDate"))("readonlyInput",!0)("showIcon",!0))}function H(o,n){1&o&&(t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"p-inputNumber",20),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()),2&o&&(t.xp6(2),t.Q6J("placeholder","N "+t.lcZ(3,4,"form.label.m"))("min",1)("max",600)("suffix"," "+t.lcZ(4,6,"form.label.m")))}function W(o,n){1&o&&(t.TgZ(0,"div",1),t._UZ(1,"div",2)(2,"p-inputNumber",21),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()),2&o&&(t.xp6(2),t.Q6J("placeholder","N "+t.lcZ(3,4,"form.label.y"))("min",1)("max",50)("suffix"," "+t.lcZ(4,6,"form.label.y")))}function tt(o,n){1&o&&(t.TgZ(0,"div",1)(1,"div",2)(2,"label",22),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"i",4),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",14),t._UZ(8,"p-inputNumber",23),t.ALo(9,"translate"),t.qZA()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,8,"form.label.amountInitial")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(6,10,"tooltip.amountInitial"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("placeholder",t.lcZ(9,12,"form.label.amountInitial"))("min",0)("max",1e6)("minFractionDigits",0))}let D=((_=class{constructor(n,e,s){this.translateService=n,this.router=e,this.loaderService=s,this.formSubmit=new t.vpe,this.stocksCustom=L.xB.map(a=>({name:a,code:P(a)})),this.stocksTop500=L.aj.map(a=>({name:a,code:P(a)})),this.stocksAll=L.vF.map(a=>({name:a,code:P(a)})),this.filteredStocks=[],this.endDateOptions=this.getEndDateOptions(),this.investmentAmount=100,this.routeTitleKey=R.d.Empty,this.DateEnum=f,this.isYahooLoading$=this.loaderService.isYahooLoading$,this.stocks=this.stocksCustom,this.stockSymbolsListOptions=this.getSymbolListOptions(),this.isStockListAsDropdown=!0,this.routeTitleKey=(0,J.T)(this.router.routerState.root),this.router.events.pipe((0,b.t)(this)).subscribe(a=>{a instanceof Z.m2&&(this.routeTitleKey=(0,J.T)(this.router.routerState.root))}),this.form=new c.cw({startDate:new c.NI(new Date("01-01-2013"),c.kI.required),endDateType:new c.NI(this.endDateOptions[0],c.kI.required),endDate:new c.NI(new Date("01-01-2023"),c.kI.required),monthQuantity:new c.NI(12,c.kI.required),yearsQuantity:new c.NI(1,c.kI.required),stockSymbol:new c.NI(this.stocks[0],[c.kI.required]),addInitialAmount:new c.NI(!1),investmentAmountInitial:new c.NI(0),investmentAmount:new c.NI(this.investmentAmount,c.kI.required),inflationMatter:new c.NI(!1),inflationValue:new c.NI(0)}),this.translateService.onLangChange.pipe((0,b.t)(this)).subscribe(()=>{this.endDateOptions=this.getEndDateOptions(),this.stockSymbolsListOptions=this.getSymbolListOptions()})}filterStock(n){const e=[],s=n.query.toLowerCase();for(let a=0;a<this.stocks.length;a++){const d=this.stocks[a];d.name.toLowerCase().includes(s)&&e.push(d)}this.filteredStocks=e}submitForm(){const n=this.patchEndDate();this.formSubmit.emit(n)}selectSymbolOptions(n){switch(n.code){case r.K.Custom:this.isStockListAsDropdown=!0,this.stocks=[...this.stocksCustom];break;case r.K.Top500:this.isStockListAsDropdown=!0,this.stocks=[...this.stocksTop500];break;case r.K.All:this.isStockListAsDropdown=!1,this.stocks=[...this.stocksAll]}this.form.controls.stockSymbol.patchValue(null),this.form.controls.stockSymbol.markAsDirty()}getEndDateOptions(){return[{name:this.translateService.instant("form.label.untilNow"),code:f.UntilNow},{name:this.translateService.instant("form.label.selectDate"),code:f.SelectDate},{name:this.translateService.instant("form.label.monthQuantity"),code:f.MonthQuantity},{name:this.translateService.instant("form.label.yearsQuantity"),code:f.YearsQuantity}]}getSymbolListOptions(){return[{name:this.translateService.instant("form.label.stocks.symbolListOptions.custom"),code:r.K.Custom},{name:this.translateService.instant("form.label.stocks.symbolListOptions.top500"),code:r.K.Top500},{name:this.translateService.instant("form.label.stocks.symbolListOptions.all"),code:r.K.All}]}patchEndDate(){if(this.form.value.endDateType.code!==f.SelectDate){const e=this.getEndDate();this.form.patchValue({endDate:e})}return this.form.value}getEndDate(){const n=this.form.value.startDate.getTime();switch(this.form.value.endDateType.code){case f.MonthQuantity:return new Date((0,A.NB)(n,this.form.value.monthQuantity));case f.YearsQuantity:return new Date((0,A.NB)(n,12*this.form.value.yearsQuantity));default:return new Date}}}).\u0275fac=function(n){return new(n||_)(t.Y36(h.sK),t.Y36(Z.F0),t.Y36(x.D1))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-general-form"]],outputs:{formSubmit:"formSubmit"},decls:62,vars:84,consts:[[1,"p-fluid","general-form",3,"formGroup","ngSubmit"],[1,"general-form__field"],[1,"general-form__label"],["for","startDate"],[1,"pi","pi-question","info-icon",3,"popperLoose","popperLooseTrigger","popperLoosePlacement"],["formControlName","startDate","id","startDate","view","month","dateFormat","mm/yy",1,"general-form__input",3,"placeholder","readonlyInput","showIcon"],["for","endDateType"],["formControlName","endDateType","id","endDateType","optionLabel","name",1,"general-form__input",3,"options"],["class","general-form__field",4,"ngIf"],["for","stockSymbolsList"],["id","stockSymbolsList","optionLabel","name",1,"general-form__input",3,"options","onChange"],["for","stockSymbol"],["formControlName","stockSymbol","id","stockSymbol","field","name",1,"general-form__input",3,"suggestions","dropdown","forceSelection","placeholder","completeMethod"],["for","investmentAmount"],[1,"general-form__input"],["formControlName","investmentAmount","id","investmentAmount","inputId","stacked","mode","currency","currency","USD",1,"w-full","input-with-slider",3,"ngModel","placeholder","min","max","ngModelChange"],["formControlName","investmentAmount",1,"w-full","input-with-slider",3,"ngModel","min","max","step","ngModelChange"],["formControlName","addInitialAmount",3,"binary"],["type","submit","icon","pi pi-check",1,"p-button-sm","general-form__submit",3,"label","disabled","loading"],["formControlName","endDate","view","month","dateFormat","mm/yy",1,"general-form__input",3,"placeholder","readonlyInput","showIcon"],["formControlName","monthQuantity",1,"general-form__input",3,"placeholder","min","max","suffix"],["formControlName","yearsQuantity",1,"general-form__input",3,"placeholder","min","max","suffix"],["for","investmentAmountInitial"],["formControlName","investmentAmountInitial","id","investmentAmountInitial","inputId","stacked","mode","currency","currency","USD",1,"general-form__input",3,"placeholder","min","max","minFractionDigits"]],template:function(n,e){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return e.submitForm()}),t.TgZ(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"i",4),t.ALo(7,"translate"),t.qZA(),t._UZ(8,"p-calendar",5),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",1)(11,"div",2)(12,"label",6),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"i",4),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"p-dropdown",7),t.qZA(),t.YNc(18,V,4,5,"div",8),t.YNc(19,H,5,8,"div",8),t.YNc(20,W,5,8,"div",8),t.TgZ(21,"div",1)(22,"div",2)(23,"label",9),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"i",4),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"p-dropdown",10),t.NdJ("onChange",function(a){return e.selectSymbolOptions(a.value)}),t.qZA()(),t.TgZ(29,"div",1)(30,"div",2)(31,"label",11),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"i",4),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"p-autoComplete",12),t.NdJ("completeMethod",function(a){return e.filterStock(a)}),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",1)(39,"div",2)(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t._UZ(43,"i",4),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"div",14)(46,"p-inputNumber",15),t.NdJ("ngModelChange",function(a){return e.investmentAmount=a}),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"p-slider",16),t.NdJ("ngModelChange",function(a){return e.investmentAmount=a}),t.qZA()()(),t.TgZ(49,"div",1)(50,"div",2)(51,"label"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._UZ(54,"i",4),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"div",14),t._UZ(57,"p-checkbox",17),t.qZA()(),t.YNc(58,tt,10,14,"div",8),t._UZ(59,"p-button",18),t.ALo(60,"translate"),t.ALo(61,"async"),t.qZA()),2&n&&(t.Q6J("formGroup",e.form),t.xp6(4),t.Oqu(t.lcZ(5,50,"form.label.startDate")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(7,52,"tooltip.startDate."+e.routeTitleKey))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("placeholder",t.lcZ(9,54,"form.label.startDate"))("readonlyInput",!0)("showIcon",!0),t.xp6(5),t.Oqu(t.lcZ(14,56,"form.label.endDate")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(16,58,"tooltip.endDate."+e.routeTitleKey))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("options",e.endDateOptions),t.xp6(1),t.Q6J("ngIf",(null==e.form.controls.endDateType.value?null:e.form.controls.endDateType.value.code)===e.DateEnum.SelectDate),t.xp6(1),t.Q6J("ngIf",(null==e.form.controls.endDateType.value?null:e.form.controls.endDateType.value.code)===e.DateEnum.MonthQuantity),t.xp6(1),t.Q6J("ngIf",(null==e.form.controls.endDateType.value?null:e.form.controls.endDateType.value.code)===e.DateEnum.YearsQuantity),t.xp6(4),t.Oqu(t.lcZ(25,60,"form.label.stocks.stocksList")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(27,62,"tooltip.stocksList"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("options",e.stockSymbolsListOptions),t.xp6(4),t.Oqu(t.lcZ(33,64,"form.label.stocks.stockSymbol")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(35,66,"tooltip.stockSymbol"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(2),t.Q6J("suggestions",e.filteredStocks)("dropdown",e.isStockListAsDropdown)("forceSelection",!0)("placeholder",t.lcZ(37,68,"form.label.stocks.stockSymbol")),t.xp6(5),t.Oqu(t.lcZ(42,70,"form.label.amount")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(44,72,"tooltip.amount"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("ngModel",e.investmentAmount)("placeholder",t.lcZ(47,74,"form.label.amount"))("min",10)("max",1e4),t.xp6(2),t.Q6J("ngModel",e.investmentAmount)("min",10)("max",500)("step",10),t.xp6(4),t.Oqu(t.lcZ(53,76,"form.label.addInitialAmount")),t.xp6(2),t.Q6J("popperLoose",t.lcZ(55,78,"tooltip.addInitialAmount"))("popperLooseTrigger","click")("popperLoosePlacement","top"),t.xp6(3),t.Q6J("binary",!0),t.xp6(1),t.Q6J("ngIf",e.form.value.addInitialAmount),t.xp6(1),t.Q6J("label",t.lcZ(60,80,"button.submit"))("disabled",!e.form.valid)("loading",t.lcZ(61,82,e.isYahooLoading$)))},dependencies:[y.O5,c._Y,c.JJ,c.JL,c.sg,c.u,F.VS,G.f,K.zx,j.Lt,E.Rn,B.Qc,X.iR,z.XZ,y.Ov,h.X$],styles:["@media only screen and (max-width: 992px){.hide-not-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 993px){.hide-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 577px){.hide-not-mobile[_ngcontent-%COMP%]{display:none!important}}.general-form[_ngcontent-%COMP%]{display:block;max-width:35rem;margin:0 auto}.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:.5rem;display:flex;align-items:center;justify-content:space-between}@media only screen and (max-width: 576px){.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]{flex-wrap:wrap}}.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;margin-right:1rem}@media only screen and (max-width: 576px){.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__label[_ngcontent-%COMP%]{width:100%;margin-right:0;margin-bottom:1rem}}.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__input[_ngcontent-%COMP%]{width:12rem;line-height:1.4}@media only screen and (max-width: 576px){.general-form[_ngcontent-%COMP%]   .general-form__field[_ngcontent-%COMP%]   .general-form__input[_ngcontent-%COMP%]{width:100%}}.general-form[_ngcontent-%COMP%]   .general-form__submit[_ngcontent-%COMP%]{margin-top:2rem;width:12rem;display:block}"],changeDetection:0}),_);D=(0,q.gn)([(0,b.c)()],D);var et=l(720),$=l(8794);let ot=(()=>{var o;class n{constructor(s){this.translateService=s,this.chartTextColor="primary"}ngOnInit(){this.prepareChartData()}prepareChartData(){const s=[],a=this.rows.reduce((i,m)=>(s.push(m.date),i[r.f.Price].push(m.price),i[r.f.InvestedTotal].push(m.investedTotal),i[r.f.PortfolioTotal].push(m.portfolioTotal),i[r.f.PercentTotal].push(m.percentTotal),i[r.f.PercentTotalAbsolute].push(m.percentTotalAbsolute),i[r.f.TotalInflation].push(m.totalInflation),i[r.f.TotalMinusInflation].push(m[r.f.TotalMinusInflation]),i),{[r.f.Price]:[],[r.f.InvestedTotal]:[],[r.f.PortfolioTotal]:[],[r.f.PercentTotal]:[],[r.f.PercentTotalAbsolute]:[],[r.f.TotalInflation]:[],[r.f.TotalMinusInflation]:[]}),d=this.translateService.instant("labels.portfolioTotal"),u=this.translateService.instant("labels.investedTotal"),T=this.translateService.instant("labels.percentTotal"),C=this.translateService.instant("labels.percentTotalAbsolute"),O=this.translateService.instant("labels.totalMinusInflation"),k=this.translateService.instant("labels.totalInflation"),M=this.fieldsToShow.map((i,m)=>({label:this.translateService.instant(`labels.${i}`),data:a[i],borderWidth:2,fill:!0,tension:.4,borderColor:this.colors[m],backgroundColor:this.colors[m]}));this.data={labels:s,datasets:M},this.options={maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:this.chartTextColor,boxHeight:20,boxWidth:20,borderRadius:5,useBorderRadius:!0}},tooltip:{callbacks:{label:function(i){switch(i.dataset.label){case d:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${u}: ${p(a.investedTotal[i.dataIndex])}`,`- ${T}: ${p(a.percentTotal[i.dataIndex])}`,`- ${C}: ${p(a.percentTotalAbsolute[i.dataIndex])}`];case u:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${T}: ${p(a.percentTotal[i.dataIndex])}`,`- ${C}: ${p(a.percentTotalAbsolute[i.dataIndex])}`];case T:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${C}: ${p(a.percentTotalAbsolute[i.dataIndex])}`];case C:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${T}: ${p(a.percentTotal[i.dataIndex])}`];case O:return[`${i.dataset.label}: ${i.formattedValue}`,`- ${k}: ${p(a.totalInflation[i.dataIndex])}`];default:return[`${i.dataset.label}: ${i.formattedValue}`]}}}}},scales:{x:{ticks:{color:this.chartTextColor},grid:{display:!1}},y:{ticks:{color:this.chartTextColor},grid:{display:!1}}}}}}return(o=n).\u0275fac=function(s){return new(s||o)(t.Y36(h.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-general-chart"]],inputs:{rows:"rows",fieldsToShow:"fieldsToShow",colors:"colors"},decls:2,vars:2,consts:[[1,"card"],["type","line",3,"data","options"]],template:function(s,a){1&s&&(t.TgZ(0,"div",0),t._UZ(1,"p-chart",1),t.qZA()),2&s&&(t.xp6(1),t.Q6J("data",a.data)("options",a.options))},dependencies:[$.C],changeDetection:0}),n})(),nt=(()=>{var o;class n{constructor(s){this.translateService=s}ngOnChanges(s){s.resultRow&&(this.colors=this.colorsCheck(),this.data=this.prepareData(),this.options={plugins:{legend:{labels:{usePointStyle:!0}}}})}prepareData(){const{labels:s,data:a}=this.fieldsToShow.reduce((d,u)=>(d.labels.push(this.translateService.instant(`labels.${u}`)),d.data.push(this.resultRow[u]),d),{labels:[],data:[]});return{labels:s,datasets:[{data:a,backgroundColor:this.colors}]}}colorsCheck(){return this.fieldsToShow.map((s,a)=>this.resultRow[s]>0?this.colors[a]:"red")}}return(o=n).\u0275fac=function(s){return new(s||o)(t.Y36(h.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-pie-chart"]],inputs:{resultRow:"resultRow",colors:"colors",fieldsToShow:"fieldsToShow"},features:[t.TTD],decls:1,vars:2,consts:[["type","pie",3,"data","options"]],template:function(s,a){1&s&&t._UZ(0,"p-chart",0),2&s&&t.Q6J("data",a.data)("options",a.options)},dependencies:[$.C],changeDetection:0}),n})();var v;function st(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",11)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",12),t._UZ(8,"i",13),t.qZA(),t.TgZ(9,"div",14),t.NdJ("click",function(){t.CHM(e),t.oxw();const a=t.MAs(6),d=t.oxw();return t.KtG(d.scrollTo(a))}),t._UZ(10,"i",15),t.qZA()()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"texts.stocksInfoText1")," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"texts.stocksInfoText2")," "))}function at(o,n){if(1&o&&t._UZ(0,"app-pie-chart",21),2&o){const e=t.oxw(3);t.Q6J("resultRow",e.resultRow)("colors",e.dataColors)("fieldsToShow",e.fieldToShow)}}function it(o,n){if(1&o&&(t.TgZ(0,"div",16)(1,"div",17)(2,"p"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"p",18),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"p",18),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"p",18)(18,"b"),t._uU(19),t.qZA()(),t.TgZ(20,"p"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"p",18)(24,"b"),t._uU(25),t.qZA()(),t.TgZ(26,"p"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"p",18)(30,"b"),t._uU(31),t.qZA()()(),t.TgZ(32,"div",19),t.YNc(33,at,1,3,"app-pie-chart",20),t.qZA()()),2&o){const e=t.oxw().ngIf,s=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,16,"texts.stocksInfoText3")),t.xp6(3),t.hij(" ",s.resultsInfo.months+" "+t.lcZ(7,18,"form.label.m")+" ("+s.resultsInfo.years+" "+t.lcZ(8,20,"form.label.y")," ) "),t.xp6(4),t.Oqu(t.lcZ(11,22,"texts.stocksInfoText4")),t.xp6(3),t.Oqu(s.resultsInfo.company),t.xp6(2),t.Oqu(t.lcZ(16,24,"texts.stocksInfoText5")),t.xp6(4),t.hij("",s.resultsInfo.investedTotal,"$"),t.xp6(2),t.Oqu(t.lcZ(22,26,"texts.stocksInfoText6")),t.xp6(3),t.Udp("color",s.resultsInfo.portfolioTotal<0?"red":"green"),t.xp6(1),t.hij("",s.resultsInfo.portfolioTotal,"$"),t.xp6(2),t.Oqu(t.lcZ(28,28,"texts.stocksInfoText7")),t.xp6(3),t.Udp("color",s.resultsInfo.percentTotal<0?"red":"green"),t.xp6(1),t.AsE("",s.resultsInfo.percentTotal,"% (",s.resultsInfo.percentTotalAbsolute,"$)"),t.xp6(2),t.Q6J("ngIf",e.isChartUpdated)}}function rt(o,n){if(1&o&&t._UZ(0,"app-general-chart",25),2&o){const e=t.oxw(3);t.Q6J("rows",e.rows)("fieldsToShow",e.fieldToShow)("colors",e.dataColors)}}function lt(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"div",22),t.YNc(2,rt,1,3,"app-general-chart",23),t.qZA(),t.TgZ(3,"div",22),t._UZ(4,"app-general-table",24),t.qZA(),t.BQk()),2&o){const e=t.oxw().ngIf,s=t.oxw();t.xp6(2),t.Q6J("ngIf",e.isChartUpdated),t.xp6(2),t.Q6J("rows",s.rows)("language",s.languageService.selectedLanguage)}}function ct(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t.YNc(3,st,11,6,"div",4),t.YNc(4,it,34,30,"div",5),t.qZA(),t.TgZ(5,"div",6,7)(7,"div",8)(8,"app-general-form",9),t.NdJ("formSubmit",function(a){t.CHM(e);const d=t.oxw();return t.KtG(d.getStocksData(a))}),t.qZA()()()(),t.YNc(9,lt,5,3,"ng-container",10),t.qZA()}if(2&o){const e=n.ngIf,s=t.oxw();t.xp6(3),t.Q6J("ngIf",!s.rows.length),t.xp6(1),t.Q6J("ngIf",s.rows.length),t.xp6(5),t.Q6J("ngIf",s.rows.length&&!1===e.isYahooLoading)}}const pt=function(o,n){return{isYahooLoading:o,isChartUpdated:n}};let Q=((v=class{constructor(n,e,s){this.apiService=n,this.languageService=e,this.loaderService=s,this.colorOpacity=.6,this.rows=[],this.dataColors=[`rgb(17 138 178 / ${this.colorOpacity})`,`rgb(255 209 102 / ${this.colorOpacity})`,`rgb(6 214 160 / ${this.colorOpacity})`,`rgb(7 59 76 / ${this.colorOpacity})`,`rgb(239 71 111 / ${this.colorOpacity})`]}getStocksData(n){this.apiService.getStockData(n.stockSymbol.code,n.startDate,n.endDate).pipe((0,b.t)(this)).subscribe(e=>{this.rows=this.prepareRows(e,n),this.resultRow=this.rows[this.rows.length-1],this.resultsInfo=this.prepareResultsInfo(n,this.resultRow);const s=Object.keys(this.rows[0]);this.fieldToShow=[r.f.PercentTotalAbsolute,r.f.InvestedTotal,r.f.PortfolioTotal,r.f.TotalMinusInflation].filter(a=>s.includes(a))})}scrollTo(n){n.scrollIntoView({behavior:"smooth"})}prepareRows(n,e){const s=e.investmentAmount,a=e.investmentAmountInitial||s,d=n.chart.result[0].indicators.quote[0],u=n.chart.result[0].timestamp,T=(0,A.Xn)(e.startDate,e.endDate),C=(0,A.wZ)(u,T),O=e.inflationMatter&&e.inflationValue?e.inflationValue/12:0;return C.reduce((k,M,i)=>{const m=d.close[M];let g,S;0===i?(g=a,S=g/m):(g=k[i-1][r.f.InvestedTotal]+s,S=s/m+k[i-1][r.f.StocksTotal]);const N=S*m,Y=N-g,ut=0===g?0:Y/g*100,I={date:this.getDateByTimestampIndex(u,M),price:p(m),investedTotal:p(g),stocksTotal:p(S),portfolioTotal:p(N),percentTotalAbsolute:p(Y),percentTotal:p(ut)};return O&&(I[r.f.TotalInflation]=p(O*i),I[r.f.TotalMinusInflation]=this.getTotalMinusInflation(N,I[r.f.TotalInflation])),k.push(I),k},[])}getTotalMinusInflation(n,e){return p(n-n*e/100)}prepareResultsInfo(n,e){return{company:n.stockSymbol.name,months:this.rows.length,years:p(this.rows.length/12),investedTotal:e[r.f.InvestedTotal],portfolioTotal:e[r.f.PortfolioTotal],percentTotal:e[r.f.PercentTotal],percentTotalAbsolute:e[r.f.PercentTotalAbsolute]}}getDateByTimestampIndex(n,e){return new Date(1e3*n[e]).toLocaleDateString("en-US")}}).\u0275fac=function(n){return new(n||v)(t.Y36(x.sM),t.Y36(x.TS),t.Y36(x.D1))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-stocks"]],decls:3,vars:8,consts:[["class","stocks",4,"ngIf"],[1,"stocks"],[1,"stocks-first-row"],[1,"card","stocks-info"],["class","stocks-info-text",4,"ngIf"],["class","stocks-info-results",4,"ngIf"],[1,"stocks-form"],["formAnchor",""],[1,"card"],[3,"formSubmit"],[4,"ngIf"],[1,"stocks-info-text"],[1,"stocks-info-icon","hide-not-any-desktop"],[1,"pi","pi-chevron-right"],[1,"stocks-info-icon","stocks-info-icon-button","hide-any-desktop",3,"click"],[1,"pi","pi-chevron-down"],[1,"stocks-info-results"],[1,"stocks-info-results-text"],[1,"stocks-info-value"],[1,"stocks-info-results-chart"],[3,"resultRow","colors","fieldsToShow",4,"ngIf"],[3,"resultRow","colors","fieldsToShow"],[1,"stocks-card"],[3,"rows","fieldsToShow","colors",4,"ngIf"],[3,"rows","language"],[3,"rows","fieldsToShow","colors"]],template:function(n,e){1&n&&(t.YNc(0,ct,10,3,"div",0),t.ALo(1,"async"),t.ALo(2,"async")),2&n&&t.Q6J("ngIf",t.WLB(5,pt,t.lcZ(1,1,e.loaderService.isYahooLoading$),t.lcZ(2,3,e.loaderService.isChartUpdated$)))},dependencies:[y.O5,D,et.b,ot,nt,y.Ov,h.X$],styles:["@media only screen and (max-width: 992px){.hide-not-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 993px){.hide-any-desktop[_ngcontent-%COMP%]{display:none!important}}@media only screen and (min-width: 577px){.hide-not-mobile[_ngcontent-%COMP%]{display:none!important}}.stocks[_ngcontent-%COMP%]   .stocks-first-row[_ngcontent-%COMP%]{display:flex;gap:2rem;flex-wrap:wrap}.stocks[_ngcontent-%COMP%]   .stocks-form[_ngcontent-%COMP%]{display:block;width:calc(50% - 1rem)}@media only screen and (max-width: 992px){.stocks[_ngcontent-%COMP%]   .stocks-form[_ngcontent-%COMP%]{width:100%}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]{width:calc(50% - 1rem);display:flex;flex-direction:column;justify-content:center;align-items:center}@media only screen and (max-width: 992px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]{width:100%}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]{max-width:40rem;font-size:1.2rem;line-height:1.5;display:flex;flex-direction:column;text-align:center;justify-content:center;align-items:center;gap:2rem}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]   .stocks-info-icon[_ngcontent-%COMP%]{color:var(--primary-color);width:4rem;height:4rem;display:flex;align-items:center;justify-content:center}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]   .stocks-info-icon.stocks-info-icon-button[_ngcontent-%COMP%]{cursor:pointer;background:var(--primary-color);color:#fff;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:50%}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-text[_ngcontent-%COMP%]   .stocks-info-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]{max-width:40rem;display:flex;justify-content:space-between;align-items:center}@media only screen and (max-width: 576px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]{flex-wrap:wrap}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]{line-height:1.5;width:50%}@media only screen and (max-width: 576px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]{width:100%}}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-text[_ngcontent-%COMP%]   .stocks-info-value[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--primary-color);text-align:right;margin-bottom:1rem;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-chart[_ngcontent-%COMP%]{width:250px}@media only screen and (max-width: 576px){.stocks[_ngcontent-%COMP%]   .stocks-info[_ngcontent-%COMP%]   .stocks-info-results[_ngcontent-%COMP%]   .stocks-info-results-chart[_ngcontent-%COMP%]{margin:2rem auto}}.stocks[_ngcontent-%COMP%]   .stocks-card[_ngcontent-%COMP%]{margin-top:2rem;width:calc(100vw - 4rem)}"],changeDetection:0}),v);Q=(0,q.gn)([(0,b.c)()],Q);const mt=[{path:"",component:Q}];let dt=(()=>{var o;class n{}return(o=n).\u0275fac=function(s){return new(s||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[Z.Bz.forChild(mt),Z.Bz]}),n})(),ft=(()=>{var o;class n{}return(o=n).\u0275fac=function(s){return new(s||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[x.sM],imports:[y.ez,dt,w.Iu,w.C1,w.yu,h.aw,w.NA]}),n})()}}]);